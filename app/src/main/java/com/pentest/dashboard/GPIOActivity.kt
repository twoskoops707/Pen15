package com.pentest.dashboard

import android.os.Bundle
import android.widget.ImageView
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import com.google.android.material.button.MaterialButton

class GPIOActivity : AppCompatActivity() {

    private lateinit var gpioOutput: TextView

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_gpio)

        gpioOutput = findViewById(R.id.gpioOutput)

        findViewById<ImageView>(R.id.btnBack).setOnClickListener { finish() }

        // All buttons show "NOT IMPLEMENTED" message
        findViewById<MaterialButton>(R.id.btnMarauder).setOnClickListener {
            showNotImplemented("WiFi Marauder")
        }

        findViewById<MaterialButton>(R.id.btnDeauth).setOnClickListener {
            showNotImplemented("Deauth Attack")
        }

        findViewById<MaterialButton>(R.id.btnEvilPortal).setOnClickListener {
            showNotImplemented("Evil Portal")
        }

        findViewById<MaterialButton>(R.id.btnWifiScan).setOnClickListener {
            showNotImplemented("WiFi Scanner")
        }

        findViewById<MaterialButton>(R.id.btnBLESpam).setOnClickListener {
            showNotImplemented("BLE Spam")
        }

        findViewById<MaterialButton>(R.id.btnBeaconSpam).setOnClickListener {
            showNotImplemented("Beacon Spam")
        }

        findViewById<MaterialButton>(R.id.btnProbeSniff).setOnClickListener {
            showNotImplemented("Probe Sniffer")
        }

        findViewById<MaterialButton>(R.id.btnAutomatedCrack).setOnClickListener {
            showNotImplemented("Automated Crack")
        }
    }

    private fun showNotImplemented(feature: String) {
        val message = """
            === $feature ===

            This feature is NOT yet implemented.

            Requires:
            - ESP32 Marauder firmware on AWOK V3 board
            - GPIO serial communication
            - Real command protocol implementation

            NO FAKE RESULTS will be shown.
            This will only work with actual hardware.
        """.trimIndent()

        gpioOutput.text = message
    }

    private fun addLog(message: String) {
        val timestamp = java.text.SimpleDateFormat("HH:mm:ss", java.util.Locale.US)
            .format(java.util.Date())
        val currentLog = gpioOutput.text.toString()
        gpioOutput.text = "[$timestamp] $message\n$currentLog"
    }
}
